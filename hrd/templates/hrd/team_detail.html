{% extends 'base.html' %}
{% block main_block %}



    <div class="container my-3">

        <div class="row">
            <div class="col-12">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5>{{ team.team_name }}</h5>
                    </div>
                    <div class="card-body">
                        <blockquote class="blockquote mb-0">
                            <p>{{ team.team_explanation }}</p>
                            <footer class="blockquote-footer">{{ team.team_position }}</footer>
                        </blockquote>
                    </div>
                </div>
            </div>
        </div>

        <h5>팀원 목록</h5>
        <div class="row">
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">id</th>
                    <th scope="col">사원명</th>
                    <th scope="col">직급</th>
                    <th scope="col">입사일</th>
                </tr>
                </thead>
                <tbody>
                {% if team_member.exists %}
                    {% for row in team_member %}
                        <tr>
                            <th scope="row">{{ row.id }}</th>
                            <td><a href="/emp/{{ row.id }}">{{ row.emp_name }}</a></td>
                            {# 사원 상세로 갈 수 있도록 #}
                            <td>{{ row.emp_rank }}</td>
                            <td>{{ row.entry_date }}</td>
                        </tr>
                    {% endfor %}
                {% endif %}


                </tbody>
            </table>
        </div>
    </div>

    {# 유저인지 아닌지에 따라서 수정, 삭제 버튼 유무 설정 #}
    {% if user.is_authenticated %}
        {% if user.is_superuser or user.is_staff %}

            {# 삭제 버튼 눌렀을 때 모달띄우기#}
            <a class="btn btn-info btn-sm float-right m-2" href=" " role="button"
               data-toggle="modal" data-target="#deleteModal">
                <i class="fas fa-pen"></i>&nbsp;&nbsp;삭제</a>


            <a class="btn btn-info btn-sm float-right m-2" href="/hrd/team_update/{{ team.pk }}/" role="button">
                <i class="fas fa-pen"></i>&nbsp;&nbsp;수정</a>


        {% endif %}
    {% endif %}

    <!-- Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">확인</h5>
                    {# x 표시 버튼 #}
                    {#                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">#}
                    {#                        <span aria-hidden="true">&times;</span></button>#}
                </div>
                <div class="modal-body"> 해당 부서를 삭제하시겠습니까?</div>
                <div class="modal-footer">
                    {#모달 안에서 form을 이용해서 post로 전달 urls.py 에서 이름(name='team_d') 설정#}
                    <form action="{% url 'team_d' pk=team.pk %}" method="POST">
                        {% csrf_token %}
                        <button class="btn btn-primary">삭제하기</button>
                    </form>


                    <button type="button" class="btn btn-primary" data-dismiss="modal">취소하기</button>
                </div>
            </div>
        </div>
    </div>


{% endblock %}